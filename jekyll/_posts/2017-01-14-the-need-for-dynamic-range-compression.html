---
layout: post
title: The Need for Dynamic Range Compression
author: Chip
---


<div class="separator" style="margin-left: 1em; margin-right: 1em; text-align: left;">Sitting at an airport for any length of time, you quickly get a sense for how uncomfortable even a moderately loud environment can become. &nbsp;At first, you can ignore the noise, but it quickly becomes grating and fatiguing and makes you irritable. A similar problem is faced by many hearing aid users. If you’ve got a hearing loss, how do you make quiet sounds loud enough to hear without also making already-loud sounds too uncomfortable? &nbsp;For hearing aids, the answer is “dynamic range compression”.</div><div class="separator" style="margin-left: 1em; margin-right: 1em; text-align: left;"><br /></div><div class="separator" style="margin-left: 1em; margin-right: 1em; text-align: center;"><img border="0" height="223" src="https://3.bp.blogspot.com/-rRSKP67BVdc/WHpR_d95AfI/AAAAAAAAEHU/7VLGlTwUrJUomzEuzwyoB01oIEpbMLHVACK4B/s400/TooQuietTooLoud%2B-%2BColor.png" width="400" /></div><div class="separator" style="margin-left: 1em; margin-right: 1em; text-align: left;">If you have normal hearing, you can hear sounds over a wide range of loudness. To illustrate this point, the figure below shows the loudness for a few common sounds: from a whisper up to a table saw. &nbsp;Quieter than a whisper, sounds start to become too quiet to hear. Around the loudness of a table saw, sounds are so loud that they become very uncomfortable (and also dangerous to your hearing). Between these two extremes, is one's usable dynamic range. &nbsp;For a person with normal hearing, it might span over 100 dB. &nbsp;It’s an impressive human capability.</div><div style="text-align: center;"><a href="http://1.bp.blogspot.com/-g03XQAOXrY0/WHpSPCgAlqI/AAAAAAAAEHc/Q_aAKeIFgKYh6pRX1iIWh0M5EwtjCn6EgCK4B/s1600/01-NormalHearing.png" imageanchor="1"><img border="0" height="280" src="https://1.bp.blogspot.com/-g03XQAOXrY0/WHpSPCgAlqI/AAAAAAAAEHc/Q_aAKeIFgKYh6pRX1iIWh0M5EwtjCn6EgCK4B/s400/01-NormalHearing.png" width="400" /></a></div><div style="text-align: left;">If you have a hearing loss, you might not have this much range. &nbsp;As shown in the figure below, if you have a hearing loss, your threshold for “too quiet” moves upward. &nbsp;You can no longer hear hear really quiet sounds. &nbsp;With a 40 dB hearing loss, you’ll likely lose the ability to hear whispering. &nbsp;Worse, even normal conversation might feel quiet enough such that it requires a lot more effort to follow. &nbsp;Losing the ability for easy conversation is when hearing loss really starts to affect one's quality of life. &nbsp;Or, it's when you start blaming everyone for "mumbling too much".</div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-bVUDQ4nodQU/WHpSaYjsLLI/AAAAAAAAEHk/w0moZrDIGEMtl9QCfnu9L4Fg1cfR4pT6wCK4B/s1600/02-40dBHearingLoss.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="280" src="https://2.bp.blogspot.com/-bVUDQ4nodQU/WHpSaYjsLLI/AAAAAAAAEHk/w0moZrDIGEMtl9QCfnu9L4Fg1cfR4pT6wCK4B/s400/02-40dBHearingLoss.png" width="400" /></a></div><div class="separator" style="clear: both;">Hearing loss is complicated, however. &nbsp;It can affect your perception of quiet sounds differently than your perception of loud sounds. Your sensitivity to quiet sounds might have decreased by 40 dB, but your sensitivity to loud sounds might not have changed at all. &nbsp;So, despite your hearing loss, that table saw might still feel uncomfortably loud. &nbsp;The result is that your hearing loss has decreased your usable dynamic range. &nbsp;You live in a narrower acoustic world.</div><div class="separator" style="clear: both;"><br /></div><div class="separator" style="clear: both;">Historically, this decreased dynamic range was a real challenge when fitting a hearing aid. If you configured a hearing aid to sufficiently amplify quiet sounds, loud sounds could end up feeling way too loud. &nbsp;As an example, the figure below shows the effect of an old-fashioned linear hearing aid providing a uniform 30 dB of amplification to all sounds. As you can see, the whisper is now loud enough to be heard. &nbsp;Great! &nbsp;But, now look at the high end -- the uniform amplification has made the lawn mower and the table saw painfully loud. &nbsp;Even a busy restaurant is perhaps loud enough to be fatiguing and difficult over time. This is very common struggle that people with hearing loss face.</div><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-l6yjaSvQTno/WHpWd1omYBI/AAAAAAAAEH4/NARc8SXZhkctX8hlNSjojFOVbQDQ2ZoBQCLcB/s1600/03-LinearHearingAid.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="295" src="https://3.bp.blogspot.com/-l6yjaSvQTno/WHpWd1omYBI/AAAAAAAAEH4/NARc8SXZhkctX8hlNSjojFOVbQDQ2ZoBQCLcB/s400/03-LinearHearingAid.png" width="400" /></a></div><div class="separator" style="clear: both; text-align: left;">One approach used by hearing aid developers to make smarter hearing aids that fully amplify quiet sounds, while providing less amplification for louder sounds. &nbsp;In effect, this approach compresses the dynamic range of the sounds presented in the ear. &nbsp;As a result, these are called "compression" hearing aids. &nbsp;The figure below illustrates the behavior of a hearing aid configured for 30 dB of gain with a 2:1 compression ratio that is applied for any sound with an amplified volume of 70 dB. &nbsp;You can clearly see the "kink" in the line where the dynamic range compression kicks in.</div><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-JeLxrVjIq-A/WHpWWMOSmJI/AAAAAAAAEH0/sSJWwPSnHaEYErQjvVRfiQF8kc6RmymGgCLcB/s1600/04-CompressionHearingAid.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="295" src="https://3.bp.blogspot.com/-JeLxrVjIq-A/WHpWWMOSmJI/AAAAAAAAEH0/sSJWwPSnHaEYErQjvVRfiQF8kc6RmymGgCLcB/s400/04-CompressionHearingAid.png" width="400" /></a></div><div class="separator" style="clear: both;">Because of the dynamic range compression, the whisper is loud enough to hear while the restaurant, lawn mower, and table saw stay at reasonable volumes. &nbsp;This is exactly what we want! &nbsp;Isn’t it great that we’ve just solved everyone’s hearing problems?</div><div class="separator" style="clear: both;"><br /></div><div class="separator" style="clear: both;">Of course, hearing loss isn’t this simple. &nbsp;Dynamic range compression does not solve all of the problem of hearing loss. &nbsp;But, it is a very important tool and is central to most hearing aid algorithms. &nbsp;So, in a follow-up post, I’ll implement a simple dynamic range compressor for my Teensy Hearing Aid. &nbsp;The compressor will be a key part of its functionality.</div><div class="separator" style="clear: both;"><br /></div><div class="separator" style="clear: both;">Oh, back to the airport. &nbsp;When you’re killing time in the airport taking pictures for your blog post, it might occur to you that all of the other travelers can see you making your silly faces for “Too Quiet!” and “Too Loud!”. &nbsp;Such a realization might give you the giggles. &nbsp;You have been warned.</div><div class="separator" style="clear: both;"><br /></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://2.bp.blogspot.com/-4zSLZ1KJSS4/WHpW5q72yfI/AAAAAAAAEH8/xJ2TxttIIEICMEs102gNsUa0_CNoE0VvwCLcB/s1600/IMG_7197-001.JPG" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="213" src="https://2.bp.blogspot.com/-4zSLZ1KJSS4/WHpW5q72yfI/AAAAAAAAEH8/xJ2TxttIIEICMEs102gNsUa0_CNoE0VvwCLcB/s320/IMG_7197-001.JPG" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">[Photo Credit: Blue Memo Productions]</td></tr></tbody></table><div class="separator" style="clear: both; text-align: left;"><u>Follow-Up:</u>&nbsp; I've implemented a basic dynamic range compressor. &nbsp;Check it out <a href="http://openaudio.blogspot.com/2017/01/basic-dynamic-range-compressor.html">here</a>!</div>
